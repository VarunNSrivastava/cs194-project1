<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>HTML Editor - Full Version</title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2022.3">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; min-height: 14.0px}
    span.s1 {font-kerning: none}
    span.Apple-tab-span {white-space:pre}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!doctype html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html&gt;</span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-tab-span">	</span>&lt;title&gt;HTML Editor - Full Version&lt;/title&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p1"><span class="s1">&lt;body class="vsc-initialized"&gt;</span></p>
<p class="p1"><span class="s1">&lt;h1 style="font-weight: 400; line-height: 1.2; color: rgb(51, 51, 51); font-family: sans-serif, Arial, Verdana, &amp;quot;trebuchet ms&amp;quot;; text-align: center;"&gt;&lt;span style="color:#000000;"&gt;CS194-26 Project 1&lt;/span&gt;&lt;/h1&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;h2 style="font-weight: 400; line-height: 1.2; color: rgb(51, 51, 51); font-family: sans-serif, Arial, Verdana, &amp;quot;trebuchet ms&amp;quot;;"&gt;&lt;span style="color:#000000;"&gt;Overview&lt;/span&gt;&lt;/h2&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;p style="color: rgb(51, 51, 51); font-family: sans-serif, Arial, Verdana, &amp;quot;trebuchet ms&amp;quot;; font-size: 13px;"&gt;&lt;span style="font-size:16px;"&gt;&lt;span style="color:#000000;"&gt;Given the&amp;nbsp;&lt;/span&gt;&lt;a href="https://inst.eecs.berkeley.edu/~cs194-26/fa22/hw/proj1/data/" style="color: rgb(7, 130, 193);"&gt;&lt;span style="color:#000000;"&gt;works&lt;/span&gt;&lt;/a&gt;&lt;span style="color:#000000;"&gt;&amp;nbsp;of Sergei Mikhailovich Prokudin-Gorskii, I have been tasked to reproduce several of his photographs in color.&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;h2 style="font-weight: 400; line-height: 1.2; color: rgb(51, 51, 51); font-family: sans-serif, Arial, Verdana, &amp;quot;trebuchet ms&amp;quot;;"&gt;&lt;span style="color:#000000;"&gt;Approach&lt;/span&gt;&lt;/h2&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;p&gt;&lt;span style="color:#000000;"&gt;My approach to align the three images was to&amp;nbsp;identify a &amp;quot;center&amp;quot; pixel for each image, and line them up according to this center pixel. After each image was lined up, they would be cropped to have the same size. The center pixel for the topmost image was chosen arbitrarily, and the centers for the other images was determined by finding which&amp;nbsp;center pixel maximized the Normalized Cross Correlation (NCC) metric.&amp;nbsp;&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;p&gt;&lt;span style="color:#000000;"&gt;The search space for the center pixels was a lattice centered near the middle of each individual image, which would increase in fineness over multiple iterations. The combination of a grid search with continually increasing the resolution of the image over iterations is a technique known as&lt;/span&gt;&lt;a href="https://en.wikipedia.org/wiki/Pyramid_(image_processing)"&gt;&lt;span style="color:#000000;"&gt; The Pyramid&lt;/span&gt;&lt;/a&gt;&lt;span style="color:#000000;"&gt;.&amp;nbsp;&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;p&gt;&lt;span style="color:#000000;"&gt;Remark: while my approach of finding centers is functionally similar as&amp;nbsp;calculating &amp;quot;shifts&amp;quot; for NumPy&amp;#39;s roll function, I avoided that approach to make it easier to compare cropped images with NCC.&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;h2 style="font-weight: 400; line-height: 1.2; color: rgb(51, 51, 51); font-family: sans-serif, Arial, Verdana, &amp;quot;trebuchet ms&amp;quot;;"&gt;&lt;span style="color:#000000;"&gt;Results&lt;/span&gt;&lt;/h2&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span></span></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/cathedral.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Cathedral. Red Center: (840, 191). Green Center: (506, 193). Blue Center: (170, 195). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span></span></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/church.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Church. Red Center: (7947, 1821). Green Center: (4778, 1813). Blue Center: (1601, 1817). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/emir.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Emir. Red Center: (7918, 1795). Green Center: (4764, 1827). Blue Center: (1604, 1851). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/harvesters.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Harvesters. Red Center: (7921, 1827). Green Center: (4767, 1824). Blue Center: (1609, 1841). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/icon.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Icon. Red Center: (8021, 1847). Green Center: (4825, 1853). Blue Center: (1622, 1870). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/lady.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Lady. Red Center: (7913, 1868). Green Center: (4763, 1871). Blue Center: (1606, 1880). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/melons.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Melons. Red Center: (7924, 1872). Green Center: (4779, 1873). Blue Center: (1620, 1885). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/monastery.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Monastery. Red Center: (849, 193). Green Center: (514, 193). Blue Center: (170, 195). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/onion_church.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Onion Church. Red Center: (7929, 1854). Green Center: (4771, 1863). Blue Center: (1607, 1890). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/sculpture.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Sculpture. Red Center: (8002, 1927). Green Center: (4852, 1910). Blue Center: (1628, 1900). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/self_portrait.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Self Portrait. Red Center: (7951, 1868). Green Center: (4797, 1876). Blue Center: (1625, 1905). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/three_generations.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Three Generations. Red Center: (7911, 1845). Green Center: (4760, 1843). Blue Center: (1604, 1857). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/tobolsk.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Tobolsk. Red Center: (845, 194). Green Center: (508, 195). Blue Center: (170, 198). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;figure&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;img src="out/train.jpeg" class="img-responsive" alt="" width: 400px, height: auto&gt; &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;figcaption&gt;"The Train. Red Center: (7999, 1837). Green Center: (4815, 1864). Blue Center: (1619, 1870). &lt;/figcaption&gt;</span></p>
<p class="p1"><span class="s1">&lt;/figure&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span></span></p>
<p class="p2"><span class="s1"><span class="Apple-tab-span">	</span></span></p>
<p class="p1"><span class="s1">&lt;h2 style="font-weight: 400; line-height: 1.2; color: rgb(51, 51, 51); font-family: sans-serif, Arial, Verdana, &amp;quot;trebuchet ms&amp;quot;;"&gt;&lt;span style="color:#000000;"&gt;Remarks&lt;/span&gt;&lt;/h2&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;p&gt;&lt;span style="color:#000000;"&gt;Some images caused problems. For example, the&amp;nbsp;center of the bottom (red channel) image of emir converges incorrectly when resolution is initialized too coarsely. In particular, it took some experimentation to find what coarseness to initialize the Pyramid Search. Eventually, I settled on starting resolution as a function of image width, particularly the following:&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;p style="text-align: center;"&gt;&lt;span style="color:#000000;"&gt;res = 1 / (10 + 0.014 * width)&amp;nbsp;&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;p&gt;&lt;span style="color:#000000;"&gt;This is fairly arbitrary, but a&amp;nbsp;wide range of initial values seems to work.&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;p&gt;&lt;span style="color:#000000;"&gt;The color image of the emir is the most imperfect. I suspect the alignment is a few pixels off, probably because the three channels for the emir have different brightness levels.&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;p&gt;&amp;nbsp;&lt;/p&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
